<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VoltK8sScheduler: A Kubernetes scheduler for energy-constrained computing environments</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reset.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/theme/moon.min.css" id="theme">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">

     <!-- === FAVICON LINKS === -->
    <!-- Remplacez par les chemins corrects si vos fichiers sont dans un sous-dossier (ex: images/favicon.ico) -->
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicons/favicon-16x16.png">
    <link rel="manifest" href="images/favicons/site.webmanifest">
    <link rel="shortcut icon" href="images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#282a36"> <!-- Couleur du th√®me Dracula pour tuile Windows -->
    <meta name="theme-color" content="#282a36"> <!-- Couleur du th√®me Dracula pour barre d'adresse Android -->
    <!-- === FIN FAVICON LINKS === -->
</head>
<body>

        <!-- NOUVELLE BARRE DE MENU EN-T√äTE -->
    <nav id="presentation-menu">
        <ul>
            <li><a href="#/introduction" data-menu-item="introduction"><i class="fas fa-home menu-icon"></i>Introduction</a></li>
            <li><a href="#/etat-art" data-menu-item="etat-art"><i class="fas fa-glasses menu-icon"></i>√âtat de l'Art</a></li>
            <li><a href="#/approche" data-menu-item="approche"><i class="fas fa-lightbulb menu-icon"></i>Approche</a></li>
            <li><a href="#/exemple" data-menu-item="exemple"><i class="fas fa-desktop menu-icon"></i>Exemple</a></li>
            <li><a href="#/experience" data-menu-item="experience"><i class="fas fa-vial menu-icon"></i>Exp√©riences</a></li>
            <li><a href="#/conclusion" data-menu-item="conclusion"><i class="fas fa-flag-checkered menu-icon"></i>Conclusion</a></li>
        </ul>
    </nav>

    <div class="reveal">
        <footer class="custom-footer">
            <span class="footer-left">CSI Day</span>
            <span class="footer-right"></span>
        </footer>

        <div class="slides">

            <!-- SECTION 1: INTRODUCTION -->
            <section id="introduction" data-transition="fade" class="title-slide-container" data-menu-section="introduction">
                
                <div class="title-slide-main-content title-slide-container">
                    <h1 class="title-main">VoltK8sScheduler</h1>
                    <p class="subtitle-main">Un ordonnanceur Kubernetes pour environnements contraints en √©nergie</p>
                </div>
                <div class="logo-banner">
                    <img src="images/inria.png" alt="Logo Inria" class="title-logo">
                    <img src="images/ls2n.png" alt="Logo ls2n" class="title-logo">
                    <img src="images/stack.png" alt="Logo STACK" class="title-logo">
                    <img src="images/IMTA.png" alt="Logo IMTA" class="title-logo">
                </div>
                
            </section>

            <section data-transition="fade" data-menu-section="introduction">
                <h2>Auteurs</h2>
                <div class="authors-list">
                    <p>Menra Wedwang Romial <small>(Inria Rennes, Nantes)</small></p>
                    <p>Jean-Marc Menaud <small>(IMT Atlantique, Nantes)</small></p>
                    <p>Remous-Aris Koutsiamanis <small>(IMT Atlantique, Nantes)</small></p>
                    <p>Guillaume Rosinosky <small>(IMT Atlantique, Nantes)</small></p>
                </div>
            </section>



            <section data-transition="fade" data-menu-section="introduction">
                <h2>Data Centers: Prolif√©ration des serveurs</h2>
                <div class="intro-icons">
                    <i class="fas fa-server fa-3x grow-icon"></i> <i class="fas fa-bolt fa-3x energy-icon"></i> <i class="fas fa-globe fa-3x impact-icon"></i>
                </div>
                <p>Hausse des centres de donn√©es. Consommation et impact environnemental croissants.</p>
            </section>

            <section data-transition="slide-in-right fade-out-left" data-menu-section="introduction">
                <h2>Consommation: Chiffres Cl√©s</h2>
                <div class="intro-icons">
                    <span class="big-text">460 TWh <small>(2022)</small></span> <i class="fas fa-arrow-right fa-2x"></i> <span class="big-text">>1000 TWh <small>(2026)</small></span> <i class="fas fa-brain fa-3x ai-icon"></i>
                </div>
                <p>IA propulse la demande. </br> 
                    Calcul = 40% conso.</br>  
                    Challenge : R√©duire co√ªts & empreinte carbone.</p>
            </section>

            <section data-transition="slide-in-right fade-out-left" data-menu-section="introduction">
                <h2>D√©fi: √ânergies Renouvelables</h2>
                 <div class="intro-icons">
                    <i class="fas fa-smog fa-3x pollution-icon"></i> <i class="fas fa-arrow-right fa-2x"></i> <i class="fas fa-wind fa-3x"></i> <i class="fas fa-sun fa-3x"></i>
                </div>
                <p>Objectif neutralit√© carbone : Solaire/√©olien dominants (90%), mais intermittents.</p>
                 <img data-src="images/solar_curve.jpg" alt="Concept Figure 1: Intermittence Solaire" class="figure-medium fragment zoomable">
            </section>

            <section data-transition="slide-in-right fade-out-left" data-menu-section="introduction">
                <h2>Intermittence & Co√ªts</h2>
                <div class="intro-icons">
                    <div class="sun-location"><i class="fas fa-sun fa-2x dimmed"></i> L1</div> <div class="sun-location"><i class="fas fa-sun fa-2x"></i> L2</div> <div class="sun-location"><i class="fas fa-sun fa-2x very-dimmed"></i> L3</div> <i class="fas fa-clock fa-2x"></i> <i class="fas fa-euro-sign fa-2x price-icon"></i>
                </div>
                <p>Solaire variable. Heures creuses/pleines influencent les co√ªts. Prix parfois n√©gatifs.</p>
            </section>

            <section data-transition="slide-in-right fade-out-left" data-menu-section="introduction">
                <h2>Notre Solution: Double Approche</h2>
                <div class="intro-icons">
                    <span class="solution-step">1</span> <i class="fas fa-sliders-h fa-3x"></i> <span class="solution-step">2</span> <i class="fab fa-docker fa-3x"></i> <i class="fas fa-cogs fa-3x k8s-logo-like"></i>
                </div>
                <p>1: Limitation dynamique puissance. </br> 2: Conteneurs + Ordonnancement K8s √©co-conscient.</p>
            </section>

            <section data-transition="slide-in-right fade-out-left" data-menu-section="introduction">
                <h2>K8s & √ânergie: Le Manque</h2>
                 <div class="intro-icons">
                    <i class="fas fa-microchip fa-2x"></i> <i class="fas fa-memory fa-2x"></i> <i class="fas fa-question-circle fa-2x energy-question"></i> <i class="fas fa-plug fa-2x"></i>
                </div>
                <p>Ordonnanceur K8s: prend des decisions en se bassant sur les ressources CPU/RAM.</br> Ignore l'√©nergie, n√©cessaire en environnement contraint.</p>
            </section>

            <section data-transition="fade" data-menu-section="introduction">
                <h2>Notre Solution: VoltK8sScheduler</h2>
                <div class="intro-icons">
                    <div class="scheduler-obj intro-scheduler">ü§ñ<br>VoltK8s</div>
                </div>
                <p>Nous proposons <strong>VoltK8sScheduler</strong>: int√®gre l'√©nergie dans le placement.</p>
            </section>

            <section data-transition="fade" data-menu-section="introduction">
                <h2>Plan (Organisation de la pr√©sentation)</h2>
                <ol class="roadmap-list">
                    <li class="current-roadmap-item"><i class="fas fa-book"></i> Introduction & Contexte</li>
                    <li class="fragment"><i class="fas fa-glasses"></i> √âtat de l'Art</li>
                    <li class="fragment"><i class="fas fa-lightbulb"></i> Approche Propos√©e</li>
                    <li class="fragment"><i class="fas fa-vial"></i> Analyse Exp√©rimentale</li>
                    <li class="fragment"><i class="fas fa-flag-checkered"></i> Conclusion & Travaux Futurs</li>
                </ol>
            </section>
            <!-- FIN SECTION INTRODUCTION -->


            <!-- SECTION 2: √âTAT DE L'ART -->

            <section section id="etat-art" data-auto-animate data-transition="fade-in slide-out-left" data-menu-section="etat-art">
                <h2>√âtat de l'Art: Power Capping</h2>
                <p>Techniques pour limiter la consommation max des serveurs.</p>
                <p class="fragment">Objectifs: efficacit√©, √©viter urgences, r√©duire co√ªts OPEX.</p>
                <div class="icon-row fragment">
                    <i class="fas fa-bolt"></i> <i class="fas fa-sliders-h"></i> <i class="fas fa-microchip"></i>
                </div>
            </section>
            <section data-auto-animate data-transition="fade-in slide-out-left" data-menu-section="etat-art">
                <h2>√âtat de l'Art: Power Capping</h2>
                <p>M√©canismes: DVFS, RAPL (Intel), Intel Node Manager, Power Gating, Thread Packing...</p>
                <p class="fragment">Beaucoup ne sont pas adapt√©s √† notre cas :</p>
                <ul class="fragment">
                    <li>N'int√®grent pas la puissance de la <em>source</em>.</li>
                    <li>Non con√ßus pour Kubernetes.</li>
                </ul>
            </section>
            <section data-auto-animate data-transition="fade-in slide-out-left" data-menu-section="etat-art">
                <h2>√âtat de l'Art: Schedulers K8s √âco-Conscients</h2>
                <p>Plusieurs travaux visent √† optimiser l'√©nergie dans K8s.</p>
                <div class="icon-row">
                    <i class="fab fa-kubernetes"></i> <i class="fas fa-leaf"></i> <i class="fas fa-brain"></i>
                </div>
            </section>
            <section data-auto-animate data-transition="fade-in slide-out-left" data-menu-section="etat-art">
                <h2>√âtat de l'Art: Schedulers K8s √âco-Conscients</h2>
                <p>Exemples : Kaur et al. (interf√©rences), Vishal et al. (edge), Philipp et al. (pr√©diction via GNN), Tayebeh et al. (Caspian, carbone), John & Javad (RLKube).</p>
                <p class="fragment">Ces solutions sont int√©ressantes, mais...</p>
            </section>
            <section data-auto-animate data-transition="fade-in slide-out-left" data-menu-section="etat-art">
                <h2>√âtat de l'Art: Leurs Limites / Notre Niche</h2>
                <p>Souvent, l'√©nergie n'est pas le <em>crit√®re principal</em> de d√©cision.</p>
                <p class="fragment">Focus sur optimisation ressources ou allocation, pas directement sur contrainte √©nerg√©tique forte.</p>
                <p class="fragment">Notre besoin: Placer charges en fonction de l'√©nergie <strong>disponible et limit√©e</strong>.</p>
                <div class="icon-row fragment">
                    <i class="fas fa-battery-half"></i> <i class="fas fa-puzzle-piece"></i>
                </div>
            </section>


            <!-- SECTION 3: APPROCHE PROPOS√âE -->

            <!-- Slide avec image cach√©e et texte cliquable -->
            <section id="approche" data-transition="fade" data-menu-section="approche" >
                <h2>Approche Propos√©e: Architecture</h2>
                <p>Vue d'ensemble de notre solution VoltK8sScheduler.</p>

                <!-- L'image est ici mais sera cach√©e par CSS -->
                <img id="hidden-architecture-img"
                     src="images/voltk8sschedulerarchitecture.jpg"
                     alt="Figure 2: VoltK8sScheduler architecture - Vue d√©taill√©e de l'interaction des composants : Default Scheduler, VoltK8sScheduler, API Server, Metrics, Powercap Agent."
                     class="visually-hidden-image zoomable-source">
                     <!-- zoomable-source est une nouvelle classe pour identifier la source de l'image pour la lightbox -->

                <!-- Le texte cliquable qui d√©clenchera la lightbox -->
                <div class="clickable-image-trigger fragment"
                     data-lightbox-target="hidden-architecture-img"
                     tabindex="0" role="button"
                     aria-label="Afficher l'image : Architecture VoltK8sScheduler">
                    <i class="fas fa-search-plus"></i> Afficher l'architecture d√©taill√©e
                    <p class="alt-text-preview">
                        (Figure 2: VoltK8sScheduler architecture - Interaction des composants)
                    </p>
                </div>

                <p class="fragment image-description-after-trigger"><small>(Default Scheduler, VoltK8sScheduler, API Server, Metrics, Powercap...)</small></p>
            </section>
            <section data-transition="fade" data-menu-section="approche">
                <h2>Composants Cl√©s</h2>
                <div class="component-box fragment" data-fragment-index="1">
                    <i class="fas fa-shield-alt fa-2x"></i> <h4>Powercap Agent</h4> <p>Limite puissance n≈ìuds (RAPL).</p>
                </div>
                <div class="component-box fragment" data-fragment-index="2">
                    <i class="fas fa-chart-line fa-2x"></i> <h4>Monitoring (Kepler)</h4> <p>Collecte conso. √©nergie.</p>
                </div>
                <div class="component-box fragment" data-fragment-index="3">
                    <div class="scheduler-obj small-scheduler">ü§ñ</div> <h4>VoltK8sScheduler</h4> <p>Plugin K8s, d√©cisions.</p>
                </div>
            </section>
            <section data-transition="fade" data-menu-section="approche" >
                <h2>Zoom: Power Capping avec RAPL</h2>
                <p>RAPL: Running Average Power Limit (Intel).</p>
                <p class="fragment">Mesure et limite la conso. de domaines du processeur.</p>
                <img id="hidden-rapl-domains-img" data-src="images/rapl_domains.png" alt="Figure 3: Domaines de puissance RAPL" class="visually-hidden-image zoomable-source">
                <div class="clickable-image-trigger fragment"
                     data-lightbox-target="hidden-rapl-domains-img"
                     tabindex="0" role="button"
                     aria-label="Afficher l'image : Domaines de puissance RAPL">
                    <i class="fas fa-search-plus"></i> Afficher les domaines de puissance RAPL
                    <p class="alt-text-preview">
                        (Figure 3: Domaines de puissance RAPL)
                    </p>
                </div>
                <p class="fragment"><small>(PKG, PPO, PP1, DRAM, PSys)</small></p>
            </section>
            <section data-transition="fade" data-menu-section="approche">
                <h2>RAPL: Fen√™tres Temporelles</h2>
                <p><strong>PL1 (Long-Term)</strong>: R√©gule conso. moyenne (TDP).</p>
                <p class="fragment"><strong>PL2 (Short-Term)</strong>: Permet pics de conso. brefs.</p>
                <p class="fragment"><strong>Peak Power</strong>: Limite absolue instantan√©e.</p>
                <div class="icon-row fragment"> <i class="fas fa-stopwatch"></i><i class="fas fa-fire"></i><i class="fas fa-bolt"></i> </div>
            </section>
            <section data-transition="fade" data-menu-section="approche">
                <h2>Algo Power Capping (1/2)</h2>
                <pre><code class="language-plaintext" data-line-numbers="1-6" style="font-size: 0.7em;">
                Algorithm 1: Power Capping
                Input: current_domain, Pmin, sleep_time, get_source_power
                1 Function Init(domains):
                2   Pmax_ref = 0;
                3   foreach domain_path in domains do
                4     Pmax_ref = max(Pmax_ref, readMaxPower(domain_path));
                5   return Pmax_ref; // Pmax de l'article (TDP)
                </code></pre>
                <p class="fragment">Initialisation: trouve Pmax de r√©f√©rence (TDP).</p>
            </section>
            <section data-transition="fade" data-menu-section="approche">
                <h2>Algo Power Capping (2/2)</h2>
                <pre><code class="language-plaintext" data-line-numbers="7-16" style="font-size: 0.65em;">
                7 while True do
                8   Ps = get_source_power(); // Puissance source
                9   Power_to_apply = Pmin;
                10  if Ps > Pmax_ref then
                11    Power_to_apply = Pmax_ref;
                12  else if Ps > Pmin then
                13    Power_to_apply = Ps;
                14  foreach domain_path in current_domain do
                15    current_domain[domain_path] = Power_to_apply;
                16  sleep(sleep_time);
                </code></pre>
                <p class="fragment">Boucle: ajuste limite conso. n≈ìud selon Ps et Pmin/Pmax.</p>
            </section>
            <section data-transition="fade" data-menu-section="approche" >
                <h2>Zoom: Le Scheduler Kubernetes</h2>
                <p>Rappel: Architecture K8s (Ma√Ætre-Esclave).</p>
                <img id="hidden-k8sarchitecture-img" data-src="images/k8s-architecture.png" alt="Figure 4: Architecture Kubernetes" class="visually-hidden-image zoomable-source">
                <div class="clickable-image-trigger fragment"
                     data-lightbox-target="hidden-k8sarchitecture-img"
                     tabindex="0" role="button"
                     aria-label="Afficher l'image : Architecture Kubernetes">
                    <i class="fas fa-search-plus"></i> Afficher l'architecture Kubernetes
                    <p class="alt-text-preview">
                        (Figure 4: Architecture Kubernetes)
                    </p>
                </div>
            </section>
            <section data-transition="fade" data-menu-section="approche">
                <h2>Framework de Scheduling K8s</h2>
                <p>Expose points d'extension (phases) pour plugins.</p>
                <img id="hidden-scheduling-framework-img" data-src="images/scheduling-framework.png" alt="Figure 5: Framework de Scheduling" class="visually-hidden-image zoomable-source" >
                <div class="clickable-image-trigger fragment"
                     data-lightbox-target="hidden-scheduling-framework-img"
                     tabindex="0" role="button"
                     aria-label="Afficher l'image : Framework de Scheduling Kubernetes">
                    <i class="fas fa-search-plus"></i> Afficher le framework de scheduling
                    <p class="alt-text-preview">
                        (Figure 5: Framework de Scheduling)
                    </p>
                </div>

                <p class="fragment">Nous utilisons: PreFilter, Filter, Score, NormalizeScore, Reserve.</p>
            </section>
            <section data-transition="fade" data-menu-section="approche">
                <h2>VoltK8sScheduler: Logique</h2>
                <div class="scheduler-obj active">ü§ñ</div>
                <p>Notre ordonnanceur se basse uniquement sur l'√©nergie pour prendre une d√©cision.</p>
                <p class="fragment">Objectif : placer pods sur n≈ìuds avec assez d'√©nergie disponible.</p>
            </section>
            <section data-transition="fade" data-menu-section="approche">
                <h2>Phase 1: PreFilter</h2>
                <p>Pr√©pare les infos. Calcule <code>podPower</code> (utilisateur ou historique).</p>
                <p class="fragment">Collecte <code>Pmax</code> (capping) et <code>Pac</code> (conso actuelle n≈ìud).</p>
                <pre class="fragment"><code class="language-plaintext" style="font-size: 0.6em;">Sortie: powerLimits [nodeName -> (Pmax, Pac, podPower)]</code></pre>
            </section>
            <section data-transition="fade" data-menu-section="approche">
                <h2>Phase 2: Filter </h2>
                <p>√âlimine n≈ìuds non viables.</p>
                <pre class="fragment">N≈ìud viable si : <code style="font-size: 4em;" >(Pmax - Pac - allocatedPower) >= podPower</code></pre>
                <div class="icon-row fragment"> <i class="fas fa-filter"></i> <i class="fas fa-check-circle green"></i> <i class="fas fa-times-circle red"></i> </div>
            </section>
            <section data-transition="fade" data-menu-section="approche">
                <h2>Phase 3: Score </h2>
                <p>Attribue un score aux n≈ìuds filtr√©s.</p>
                <pre class="fragment"><code style="font-size: large;">Score = Pmax - Pac - podPower - allocatedPower</code></pre>
                <div class="icon-row fragment"> <i class="fas fa-star"></i> <i class="fas fa-sort-numeric-up"></i> </div>
            </section>
            <section data-transition="fade" data-menu-section="approche">
                <h2>Phases 4 & 5</h2>
                <p><strong>NormalizeScore</strong>: Normalise scores (0-MaxNodeScore).</p>
                <p class="fragment"><strong>Reserve</strong>: R√©serve temporairement <code>podPower</code>. Compense le d√©lai de scrapping des m√©triques.</p>
                <div class="icon-row fragment"> <i class="fas fa-balance-scale"></i> <i class="fas fa-lock"></i> </div>
            </section>


             <!-- === EXEMPLE ILLUSTRATIF === -->
            <section data-transition="fade" id="exemple" data-menu-section="exemple">
                <h2>VoltK8sScheduler: D√©mo</h2>
                <div class="k8s-container initial-setup">
                    <div class="scheduler-obj">ü§ñ<br>Scheduler</div>
                    <div class="node-obj node-a">NodeA<br>Pmax: 100W<br>Pac: 30W<br><span class="available-power">Dispo: 70W</span><div class="power-bar-bg"><div class="power-bar" style="width: 100%;"></div></div></div>
                    <div class="node-obj node-b">NodeB<br>Pmax: 120W<br>Pac: 40W<br><span class="available-power">Dispo: 80W</span><div class="power-bar-bg"><div class="power-bar" style="width: 100%;"></div></div></div>
                    <div class="pod-queue"><p>File:</p><div class="pod-obj pod1-queue">Pod1 (20W)</div><div class="pod-obj pod2-queue">Pod2 (15W u, 30W h)</div></div>
                </div>
                <p><small><code>alloc</code>: {"A":0, "B":0}. MaxScore: 100.</small></p>
            </section>
            <section data-transition="fade-in slide-out-left" data-menu-section="exemple"><h2>Pod1: PreFilter</h2><div class="k8s-container pod1-prefilter"><div class="scheduler-obj active">ü§ñ<br>Analyse P1</div> <div class="pod-obj pod1-active">P1<br>20W</div><div class="node-obj node-a">A<br><span class="available-power">70W</span></div><div class="node-obj node-b">B<br><span class="available-power">80W</span></div></div><p>P1: user 20W. <code>podPower</code> = 20W.</p></section>
            <section data-transition="fade-in slide-out-left" data-menu-section="exemple"><h2>Pod1: Filter</h2><div class="k8s-container pod1-filter"><div class="scheduler-obj">ü§ñ</div> <div class="pod-obj pod1-checking">P1 (20W)</div><div class="node-obj node-a viable">A (70W) ‚úîÔ∏è</div><div class="node-obj node-b viable">B (80W) ‚úîÔ∏è</div></div><p>A et B viables pour P1 (20W).</p></section>
            <section data-transition="fade-in slide-out-left" data-menu-section="exemple"><h2>Pod1: Score</h2><div class="k8s-container pod1-score"><div class="scheduler-obj">ü§ñ<br>Score!</div> <div class="pod-obj pod1-waiting">P1 (20W)</div><div class="node-obj node-a"><div class="score">S: 50</div>A</div> <div class="node-obj node-b"><div class="score">S: 60</div>B</div></div><p>A: 50. B: 60.</p></section>
            <section data-transition="fade-in slide-out-left" data-menu-section="exemple"><h2>Pod1: Normalize & Assign</h2><div class="k8s-container pod1-assign"><div class="scheduler-obj">ü§ñ<br>D√©cision!</div> <div class="pod-obj pod1-assigned-b">P1(20W)‚Üí</div><div class="node-obj node-a"><div class="norm-score">N: ~83</div>A</div> <div class="node-obj node-b chosen"><div class="norm-score">N: 100</div>B ‚ú®</div></div><p>B (100) > A (~83). P1 ‚Üí B.</p></section>
            <section data-transition="fade-in slide-out-left" data-menu-section="exemple"><h2>Pod1: Reserve</h2><div class="k8s-container pod1-reserve"><div class="scheduler-obj">ü§ñ</div><div class="node-obj node-a">A<br><span class="available-power">70W</span><div class="power-bar-bg"><div class="power-bar" style="width: 100%;"></div></div></div><div class="node-obj node-b node-b-updated">B<br><span class="available-power">60W</span><div class="power-bar-bg"><div class="power-bar" style="width: 75%;"></div></div><div class="pod-obj pod1-on-nodeb">P1(20W)</div></div><div class="pod-queue"><p>File:</p><div class="pod-obj pod2-queue">Pod2 (15W u, 30W h)</div></div></div><p>B r√©serve 20W. <code>alloc</code>: {"A":0, "B":20}.</p></section>
            <section data-transition="fade-in slide-out-left" data-menu-section="exemple"><h2>Pod2: PreFilter</h2><div class="k8s-container pod2-prefilter"><div class="scheduler-obj active">ü§ñ<br>Analyse P2</div> <div class="pod-obj pod2-active">P2<br>30W(h)</div><div class="node-obj node-a">A<br><span class="available-power">70W</span></div><div class="node-obj node-b">B<br><span class="available-power">60W</span></div></div><p>P2: hist. 30W. <code>podPower</code> = 30W.</p></section>
            <section data-transition="fade-in slide-out-left" data-menu-section="exemple"><h2>Pod2: Filter</h2><div class="k8s-container pod2-filter"><div class="scheduler-obj">ü§ñ</div> <div class="pod-obj pod2-checking">P2 (30W)</div><div class="node-obj node-a viable">A (70W) ‚úîÔ∏è</div><div class="node-obj node-b viable">B (60W) ‚úîÔ∏è</div></div><p>A et B viables pour P2 (30W).</p></section>
            <section data-transition="fade-in slide-out-left" data-menu-section="exemple"><h2>Pod2: Score</h2><div class="k8s-container pod2-score"><div class="scheduler-obj">ü§ñ<br>Score!</div> <div class="pod-obj pod2-waiting">P2 (30W)</div><div class="node-obj node-a"><div class="score">S: 40</div>A</div> <div class="node-obj node-b"><div class="score">S: 30</div>B</div></div><p>A: 40. B: 30.</p></section>
            <section data-transition="fade-in slide-out-left" data-menu-section="exemple"><h2>Pod2: Normalize & Assign</h2><div class="k8s-container pod2-assign"><div class="scheduler-obj">ü§ñ<br>D√©cision!</div> <div class="pod-obj pod2-assigned-a">‚ÜíP2(30W)</div><div class="node-obj node-a chosen"><div class="norm-score">N: 100</div>A ‚ú®</div> <div class="node-obj node-b"><div class="norm-score">N: 75</div>B</div></div><p>A (100) > B (75). P2 ‚Üí A.</p></section>
            <section data-transition="fade" data-menu-section="exemple"><h2>Pod2: Reserve & √âtat Final</h2><div class="k8s-container final-state"><div class="scheduler-obj">ü§ñ</div><div class="node-obj node-a node-a-updated">A<br><span class="available-power">40W</span><div class="power-bar-bg"><div class="power-bar" style="width: 57.14%;"></div></div><div class="pod-obj pod2-on-nodea">P2(30W)</div></div><div class="node-obj node-b node-b-final">B<br><span class="available-power">60W</span><div class="power-bar-bg"><div class="power-bar" style="width: 75%;"></div></div><div class="pod-obj pod1-on-nodeb">P1(20W)</div></div></div><p>A r√©serve 30W. <code>alloc</code>: {"A":30, "B":20}.</p></section>

            <!-- <section data-transition="fade">
                <h2>D√©tails d'Impl√©mentation</h2>
                <p><strong>Monitoring:</strong> Prometheus + Kepler.</p>
                <p class="fragment"><strong>Powercap Tool:</strong> Go. API K8s, labels n≈ìuds.</p>
                <p class="fragment"><strong>Scheduler:</strong> Plugins K8s framework.</p>
                <div class="icon-row fragment"> <i class="fab fa-gofore"></i> <i class="fas fa-tags"></i> <i class="fas fa-cogs"></i> </div>
            </section> -->

            <!-- SECTION 4: ANALYSE EXP√âRIMENTALE -->

            <section id="experience" data-transition="fade" data-menu-section="experience">
                <h2>Analyse Exp√©rimentale: Configuration</h2>
                <p>Tests sur Grid5000 (Taurus, Econome, etc.).</p>
                <p class="fragment">Cluster local: 3 mini-PCs (Intel i7, 15W, RAPL v2).</p>
                <div class="icon-row fragment"> <i class="fas fa-server"></i> <i class="fas fa-desktop"></i> <i class="fas fa-flask"></i> </div>
            </section>
            <section data-transition="fade" data-menu-section="experience">
                <h2>R√©sultats Power Capping (Grid5000)</h2>
                <p>Comportement capping selon version RAPL.</p>
                <div style="display: flex; justify-content: space-around;">
                    <img id="hidden-raplv1-framework-img" data-src="images/rapl-v1.jpeg" alt="Figures 6 & 7: RAPL v1" class="visually-hidden-image zoomable-source" title="RAPL v1">
                    <div class="clickable-image-trigger fragment"
                        data-lightbox-target="hidden-raplv1-framework-img"
                        tabindex="0" role="button"
                        aria-label="Afficher l'image : RAPL v1">
                        <i class="fas fa-search-plus"></i> Afficher RAPL v1
                        <p class="alt-text-preview">
                            (Figures 6 & 7: RAPL v1)
                        </p>
                    </div>
                    <img id="hidden-raplv2-framework-img" data-src="images/rapl-v2.jpeg" alt="Figures 8 & 9: RAPL v2" class="visually-hidden-image zoomable-source" title="RAPL v2">
                    <div class="clickable-image-trigger fragment"
                        data-lightbox-target="hidden-raplv2-framework-img"
                        tabindex="0" role="button"
                        aria-label="Afficher l'image : RAPL v2">
                        <i class="fas fa-search-plus"></i> Afficher RAPL v2
                        <p class="alt-text-preview">
                            (Figures 8 & 9: RAPL v2)
                        </p>
                    </div>
                </div>
                <p class="fragment">RAPL v1: Chute rapide conso. v2: Baisse lin√©aire.</p>
            </section>
            <!-- <section data-transition="fade" data-menu-section="experience">
                <h2>Distribution Pods: N≈ìuds Identiques</h2>
                <p>Sc√©nario 1: 2 n≈ìuds workers identiques.</p>
                <p class="fragment">App web. HPA ajoute 2 r√©plicas/fois.</p>
                <img data-src="images/figure10.png" alt="Figure 10: N≈ìuds identiques" class="figure-medium fragment zoomable">
                <p class="fragment">VoltK8sScheduler √©quilibre bien la charge.</p>
            </section> -->
            <section data-transition="fade" data-menu-section="experience">
                <h2>Distribution Pods: N≈ìuds Diff√©renci√©s</h2>
                <p>Sc√©nario : Node1 Pmax = 90% de Node2 Pmax.</p>
            </section>
            <section data-transition="fade" data-menu-section="experience">
                <h3>Cas 1: Application web (guestbook)</h3>
                <div style="display: flex; justify-content: space-around; gap:20px;" >
                    <img id="hidden-webapp-framework-img" data-src="images/guestbook.jpg" alt="Figure 10: Web App, N≈ìuds identiques" class="visually-hidden-image zoomable-source">
                    <div class="clickable-image-trigger fragment"
                        data-lightbox-target="hidden-webapp-framework-img"
                        tabindex="0" role="button"
                        aria-label="Afficher l'image : Web App, N≈ìuds identiques">
                        <i class="fas fa-search-plus"></i> Afficher l'achitecture de l'application
                        <p class="alt-text-preview">
                            (Figure 10: Web App, Guestbook)
                        </p>
                    </div>
                    <img id="hidden-webapp-differentiated-img" data-src="images/scores_and_pods_web_app.png" alt="Figure 11: Web App, N≈ìuds diff√©renci√©s" class="visually-hidden-image zoomable-source">
                    <div class="clickable-image-trigger fragment"
                        data-lightbox-target="hidden-webapp-differentiated-img"
                        tabindex="0" role="button"
                        aria-label="Afficher l'image : Web App, N≈ìuds diff√©renci√©s">
                        <i class="fas fa-search-plus"></i> Courbe de distribution des pods
                        <p class="alt-text-preview">
                            (Figure 11: Web App, N≈ìuds diff√©renci√©s)
                        </p>
                    </div>
                </div>
                
                <p class="fragment">Plus de pods sur Node2 pour compenser l'√©cart entre les deux n≈ìuds.</p>
            </section>
            <section data-transition="fade" data-menu-section="experience" >
                <h3 style="text-align: center;">Cas 2: Stress-ng (gourmand)</h3>
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <img data-src="images/scores_and_pods.png" alt="Figure 12: Stress-ng, N≈ìuds diff√©renci√©s" class="figure-medium fragment zoomable" width="600" height="350" sizes="(max-width: 700px) 100vw, 600px" style="display: block; margin: 0 auto;">
                    <p class="fragment" style="text-align: center;">Moins de pods sur Node2 suffisent.</p>
                </div>
            </section>
            <section data-transition="fade" data-menu-section="experience">
                <h2>Synth√®se Exp√©rimentale</h2>
                <p>Power capping efficace pour respecter limites.</p>
                <p class="fragment">VoltK8sScheduler favorise n≈ìuds avec √©nergie r√©siduelle.</p>
                <p class="fragment">D√©cisions coh√©rentes avec algorithmes.</p>
                <div class="icon-row fragment"> <i class="fas fa-check-double green"></i> <i class="fas fa-thumbs-up"></i> </div>
            </section>


            <!-- SECTION 5: CONCLUSION ET TRAVAUX FUTURS -->
            
            <section id="conclusion" data-transition="fade" data-menu-section="conclusion">
                <h2>Conclusion</h2>
                <p>VoltK8sScheduler: ordonnanceur K8s tenant compte √©nergie.</p>
                <p class="fragment">Agent power capping + scheduler avec Prometheus/Kepler.</p>
                <p class="fragment">Combinaison respecte budget √©nergie et d√©ploie apps.</p>
            </section>
            <section data-transition="fade" data-menu-section="conclusion">
                <h2>Limitations</h2>
                <ul class="spaced-list">
                    <li class="fragment"><i class="fab fa-intel"></i> Plateformes Intel avec RAPL.</li>
                    <li class="fragment"><i class="fas fa-cloud"></i> Non sur VMs (K8s prod).</li>
                    <li class="fragment"><i class="fas fa-chart-area"></i> Impact capping sur perfs √† √©valuer.</li>
                </ul>
            </section>
            <section data-transition="fade" data-menu-section="conclusion">
                <h2>Travaux Futurs</h2>
                <ul class="spaced-list">
                    <li class="fragment"><i class="fas fa-microchip"></i> √âtendre √† AMD.</li>
                    <li class="fragment"><i class="fas fa-server"></i> Int√©gration VMs.</li>
                    <li class="fragment"><i class="fas fa-cogs"></i> Autres m√©canismes power capping.</li>
                    <!-- <li class="fragment"><i class="fas fa-recycle"></i> Prise en compte origine √©nergie.</li> -->
                </ul>
            </section>

            <section data-transition="fade" data-menu-section="conclusion">
                <h2>Questions ?</h2>
                <p>Merci pour votre attention !</p>
                <div class="icon-row" style="margin-top: 50px;">
                    <i class="fas fa-question-circle fa-3x"></i> <i class="fas fa-hands-helping fa-3x"></i>
                </div>
                 <p class="fragment"><small>Email: <a href="mailto:itsme@menraromial.com">itsme@menraromial.com</a></small></p>
                 <p class="fragment"><small>Site web: <a href="https://menraromial.com" target="_blank" rel="noopener">https://menraromial.com</a></small></p>
            </section>
            <!-- FIN SECTION CONCLUSION -->

        </div> <!-- slides -->
    </div> <!-- reveal -->

    <div id="lightbox" class="lightbox-container">
        <span class="lightbox-close-button" title="Fermer (√âchap)">√ó</span>
        <!-- NOUVEAU BOUTON PLEIN √âCRAN -->
        <span class="lightbox-fullscreen-button" title="Plein √©cran">
            <i class="fas fa-expand"></i> <!-- Ic√¥ne pour entrer en plein √©cran -->
            <i class="fas fa-compress"></i> <!-- Ic√¥ne pour sortir du plein √©cran (sera bascul√©e par JS) -->
        </span>
        <img id="lightbox-image" src="" alt="Image zoom√©e">
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/notes/notes.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/markdown/markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/highlight/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/math/math.js"></script>
    <script>
        const deck = new Reveal({
            hash: true, 
            width: 1024, 
            height: 768, 
            margin: 0.04,
            transition: 'fade',
            controls: false, 
            backgroundTransition: 'fade', 
            slideNumber: false,
            plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX ]
        });
        deck.initialize();

        const footerRight = document.querySelector('.custom-footer .footer-right');
        const menuItems = document.querySelectorAll('#presentation-menu a');
        function updateNavigationStates() {
            const currentSlide = deck.getCurrentSlide();
            let currentSectionId = null;
            if (currentSlide && currentSlide.dataset.menuSection) {
                currentSectionId = currentSlide.dataset.menuSection;
            }
            menuItems.forEach(item => {
                item.classList.toggle('active', item.dataset.menuItem === currentSectionId);
            });
            if (footerRight) {
                const slideIndex = deck.getSlidePastCount();
                const totalSlides = deck.getTotalSlides();
                if (currentSlide && !currentSlide.hasAttribute('data-no-footer')) {
                    footerRight.textContent = `${slideIndex + 1} / ${totalSlides}`;
                    document.querySelector('.custom-footer').style.display = 'flex';
                } else if (document.querySelector('.custom-footer')) {
                    document.querySelector('.custom-footer').style.display = 'none';
                }
            }
        }
        deck.on('ready', updateNavigationStates);
        deck.on('slidechanged', updateNavigationStates);

            // ... (apr√®s Reveal.initialize()) ...

    // --- JavaScript pour la Lightbox ---
     const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightbox-image');
        const revealContainer = document.querySelector('.reveal');
        const lightboxCloseBtn = document.querySelector('.lightbox-close-button');
        const lightboxFullscreenBtn = document.querySelector('.lightbox-fullscreen-button'); // R√©f√©rence au nouveau bouton
        const fullscreenEnterIcon = lightboxFullscreenBtn.querySelector('.fa-expand');
        const fullscreenExitIcon = lightboxFullscreenBtn.querySelector('.fa-compress');

        function openLightboxWithSrc(imageSrc, imageAlt) {
            if (!imageSrc) {
                console.error("Source d'image manquante pour la lightbox.");
                return;
            }
            lightboxImage.src = imageSrc;
            lightboxImage.alt = imageAlt || "Image zoom√©e";
            lightbox.style.display = 'flex';
            updateFullscreenButtonIcon(); // Mettre √† jour l'ic√¥ne au cas o√π
            setTimeout(() => {
                lightbox.classList.add('lightbox-visible-transition');
                revealContainer.classList.add('lightbox-active-blur');
            }, 10);
        }

        function closeLightbox() {
            // S'assurer de sortir du mode plein √©cran si la lightbox est ferm√©e alors qu'elle est en plein √©cran
            if (document.fullscreenElement === lightbox || document.webkitFullscreenElement === lightbox) {
                exitFullscreen();
            }
            lightbox.classList.remove('lightbox-visible-transition');
            revealContainer.classList.remove('lightbox-active-blur');
            setTimeout(() => {
                lightbox.style.display = 'none';
                lightboxImage.src = "";
                lightboxImage.alt = "";
            }, 300);
        }

        // --- API Fullscreen ---
        function enterFullscreen() {
            if (lightbox.requestFullscreen) {
                lightbox.requestFullscreen();
            } else if (lightbox.webkitRequestFullscreen) { /* Safari */
                lightbox.webkitRequestFullscreen();
            } else if (lightbox.msRequestFullscreen) { /* IE11 */
                lightbox.msRequestFullscreen();
            }
            updateFullscreenButtonIcon();
        }

        function exitFullscreen() {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) { /* Safari */
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) { /* IE11 */
                document.msExitFullscreen();
            }
            updateFullscreenButtonIcon();
        }

        function isLightboxFullscreen() {
            return !!(document.fullscreenElement === lightbox || document.webkitFullscreenElement === lightbox || document.msFullscreenElement === lightbox);
        }

        function updateFullscreenButtonIcon() {
            if (isLightboxFullscreen()) {
                fullscreenEnterIcon.style.display = 'none';
                fullscreenExitIcon.style.display = 'inline-block';
                lightboxFullscreenBtn.title = "Quitter le plein √©cran";
            } else {
                fullscreenEnterIcon.style.display = 'inline-block';
                fullscreenExitIcon.style.display = 'none';
                lightboxFullscreenBtn.title = "Plein √©cran";
            }
        }

        lightboxFullscreenBtn.addEventListener('click', function(event) {
            event.stopPropagation(); // Emp√™cher la fermeture de la lightbox
            if (isLightboxFullscreen()) {
                exitFullscreen();
            } else {
                enterFullscreen();
            }
        });

        // √âcouter les changements d'√©tat du plein √©cran (ex: utilisateur appuie sur Echap)
        document.addEventListener('fullscreenchange', updateFullscreenButtonIcon);
        document.addEventListener('webkitfullscreenchange', updateFullscreenButtonIcon); // Pour Safari
        document.addEventListener('msfullscreenchange', updateFullscreenButtonIcon);     // Pour IE

        // --- Gestionnaires d'√©v√©nements existants ---
        document.querySelector('.slides').addEventListener('click', function(event) {
            // ... (votre code existant pour ouvrir la lightbox via .clickable-image-trigger ou .zoomable) ...
            // Exemple pour .clickable-image-trigger:
            let triggerElement = event.target.closest('.clickable-image-trigger');
            if (triggerElement && triggerElement.dataset.lightboxTarget) {
                event.preventDefault(); event.stopPropagation();
                const imageToDisplay = document.getElementById(triggerElement.dataset.lightboxTarget);
                if (imageToDisplay) openLightboxWithSrc(imageToDisplay.src, imageToDisplay.alt);
            } else if (event.target.tagName === 'IMG' && event.target.classList.contains('zoomable')) {
                 event.preventDefault(); event.stopPropagation();
                 openLightboxWithSrc(event.target.src, event.target.alt);
            }
        });
        document.querySelector('.slides').addEventListener('keydown', function(event) {
            // ... (votre code existant pour le keydown sur .clickable-image-trigger) ...
             if ((event.key === 'Enter' || event.key === ' ') && event.target.classList.contains('clickable-image-trigger')) {
                event.preventDefault(); event.stopPropagation();
                const imageToDisplay = document.getElementById(event.target.dataset.lightboxTarget);
                if (imageToDisplay) openLightboxWithSrc(imageToDisplay.src, imageToDisplay.alt);
            }
        });

        lightboxCloseBtn.addEventListener('click', function(event) { event.stopPropagation(); closeLightbox(); });
        lightbox.addEventListener('click', function(event) { if (event.target === lightbox) closeLightbox(); });
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                if (lightbox.style.display === 'flex') {
                    // Si la lightbox est en plein √©cran et qu'on appuie sur Echap,
                    // le navigateur sortira du plein √©cran. Notre 'fullscreenchange' mettra √† jour l'ic√¥ne.
                    // Si elle n'est pas en plein √©cran, Echap la ferme.
                    if (!isLightboxFullscreen()) {
                        closeLightbox();
                    }
                }
            }
        });
    </script>
</body>
</html>