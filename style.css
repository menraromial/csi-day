/* style.css */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.reveal h2 {
    color: #4CAF50; /* Vert moderne */
    margin-bottom: 30px !important;
}

.k8s-container {
    display: flex;
    justify-content: space-around;
    align-items: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 20px;
    position: relative; /* Pour positionnement absolu des pods en mouvement */
}

.scheduler-obj, .node-obj, .pod-obj {
    border: 2px solid #ddd;
    border-radius: 10px;
    padding: 15px;
    text-align: center;
    min-width: 120px;
    transition: all 0.5s ease-in-out;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
}

.scheduler-obj {
    background-color: #e0f7fa; /* Bleu clair */
    border-color: #00bcd4; /* Cyan */
    font-size: 1.5em;
}
.scheduler-obj.active {
    transform: scale(1.1);
    box-shadow: 0 0 15px #00bcd4;
    animation: pulse 1s infinite;
}

.node-obj {
    background-color: #fce4ec; /* Rose clair */
    border-color: #e91e63; /* Rose */
    position: relative; /* Pour les barres de puissance */
    min-height: 100px;
}
.node-obj .available-power {
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
}
.power-bar-bg {
    width: 90%;
    height: 10px;
    background-color: #eee;
    border-radius: 5px;
    margin: 5px auto 0;
    overflow: hidden;
}
.power-bar {
    height: 100%;
    background-color: #4CAF50; /* Vert */
    border-radius: 5px;
    transition: width 0.5s ease-in-out;
}

.pod-obj {
    background-color: #fff9c4; /* Jaune clair */
    border-color: #ffeb3b; /* Jaune */
    font-size: 0.9em;
    padding: 10px;
    margin-top: 5px; /* Pour les pods dans les noeuds */
}

.pod-queue {
    border: 1px dashed #ccc;
    padding: 10px;
    border-radius: 5px;
}
.pod-queue p {
    margin: 0 0 5px 0;
    font-size: 0.8em;
}
.pod-queue .pod-obj {
    margin-bottom: 5px;
}


/* Animations Spécifiques aux Slides */
.initial-setup .pod-obj,
.pod1-prefilter .pod1-active,
.pod2-prefilter .pod2-active {
    animation: bounceIn 0.5s;
}

.pod1-filter .pod1-checking,
.pod2-filter .pod2-checking {
    animation: shakeHorizontal 0.8s;
}

.node-obj.viable {
    border-color: #4CAF50; /* Vert */
    box-shadow: 0 0 10px #4CAF50;
}
.node-obj.chosen {
    background-color: #c8e6c9; /* Vert clair */
    border-color: #4CAF50;
    transform: scale(1.1);
    box-shadow: 0 0 15px #4CAF50;
}
.node-obj.chosen .pod-obj { /* Pod une fois placé */
    animation: zoomIn 0.5s;
}


.score, .norm-score {
    font-size: 1.2em;
    font-weight: bold;
    color: #e91e63; /* Rose */
    margin-bottom: 5px;
    animation: fadeIn 0.5s;
}

/* Pods en mouvement (simplifié) */
/* Pour des animations de mouvement plus complexes, JS serait mieux */
.pod1-assign .pod1-assigned-b { animation: moveToNodeB 1s forwards; }
.pod2-assign .pod2-assigned-a { animation: moveToNodeA 1s forwards; }

@keyframes moveToNodeB {
    0% { transform: translateX(0); }
    100% { transform: translateX(150px) scale(0.8); opacity: 0; } /* Ajuster translateX */
}
@keyframes moveToNodeA {
    0% { transform: translateX(0); }
    100% { transform: translateX(-150px) scale(0.8); opacity: 0; } /* Ajuster translateX */
}

/* Petites animations utilitaires */
@keyframes pulse {
    0% { transform: scale(1.05); }
    50% { transform: scale(1.15); }
    100% { transform: scale(1.05); }
}
@keyframes bounceIn {
  0%, 20%, 40%, 60%, 80%, 100% {animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);}
  0% {opacity: 0;transform: scale3d(.3, .3, .3);}
  20% {transform: scale3d(1.1, 1.1, 1.1);}
  40% {transform: scale3d(.9, .9, .9);}
  60% {opacity: 1;transform: scale3d(1.03, 1.03, 1.03);}
  80% {transform: scale3d(.97, .97, .97);}
  100% {opacity: 1;transform: scale3d(1, 1, 1);}
}
@keyframes shakeHorizontal {
  10%, 90% { transform: translate3d(-1px, 0, 0); }
  20%, 80% { transform: translate3d(2px, 0, 0); }
  30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
  40%, 60% { transform: translate3d(4px, 0, 0); }
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes zoomIn {
  from { opacity: 0; transform: scale3d(.3, .3, .3); }
  50% { opacity: 1; }
}

/* Styles pour les pods une fois placés sur les noeuds */
.node-obj .pod-obj { /* Les pods qui sont DANS les noeuds */
    margin: 10px auto 0;
    border: 1px solid #f57f17; /* Orange foncé pour démarquer */
    background-color: #fffde7; /* Jaune très pâle */
}

/* Ajustements pour les états finaux des noeuds */
.pod1-reserve .node-b-updated .power-bar,
.final-state .node-b-final .power-bar {
    width: 50% !important; /* 80W initial - 40W Pac - 20W Pod1 = 20W / 120W Pmax => non, c'est 120 - 40 = 80 dispo; 80-20 = 60 W dispo */
                                /* (120-40-20) / (120-40) = 60 / 80 = 75% of available. Or simply (Pmax-Pac-Reserved) / Pmax */
                                /* Let's use available capacity for bar width: (Pmax-Pac-Reserved) / (Pmax-Pac)
                                   NodeB (Pmax 120, Pac 40). Available logical = 80W
                                   After Pod1 (20W): 80-20 = 60W. Bar: 60/80 = 75%
                                */
}
.pod1-reserve .node-b-updated .power-bar { width: 75% !important; } /* (120-40-20) / (120-40) = 60/80 */
.final-state .node-b-final .power-bar { width: 75% !important; }


.final-state .node-a-updated .power-bar {
    width: 57.14% !important; /* NodeA (Pmax 100, Pac 30). Available logical = 70W
                                 After Pod2 (30W): 70-30 = 40W. Bar: 40/70 = ~57.14%
                               */
}

/* Correction initiale des barres de puissance */
.initial-setup .node-a .power-bar { width: 70%; } /* (100-30)/100 */
.initial-setup .node-b .power-bar { width: calc((120 - 40) / 120 * 100%); } /* (120-40)/120 */
/* Correction: la barre devrait représenter la capacité disponible par rapport à Pmax-Pac */
/* Donc 70W dispo sur 70W de capacité logique => 100% */
/* Ou 70W dispo sur 100W Pmax => 70% */
/* J'ai choisi la 2e option dans le HTML initial, pour la visualisation de la "charge" totale.
   Si on veut visualiser la proportion de la capacité *utilisable* qui est libre :
   NodeA : (Pmax 100, Pac 30) -> 70W utilisables. Initialement 100% de ces 70W sont libres.
   NodeB : (Pmax 120, Pac 40) -> 80W utilisables. Initialement 100% de ces 80W sont libres.
   Après Pod1 (20W) sur NodeB: (80-20)/80 = 60/80 = 75% des 80W utilisables sont libres.
   Après Pod2 (30W) sur NodeA: (70-30)/70 = 40/70 = ~57.14% des 70W utilisables sont libres.
   Je vais ajuster les barres de puissance pour refléter la part de (Pmax-Pac) qui est encore dispo.
*/
.initial-setup .node-a .power-bar,
.pod1-reserve .node-a .power-bar,
.pod1-prefilter .node-a .power-bar { width: 100%; } /* 70W / (100-30) */

.initial-setup .node-b .power-bar,
.pod1-prefilter .node-b .power-bar { width: 100%; } /* 80W / (120-40) */

/* After Pod1 on NodeB */
.pod1-reserve .node-b-updated .power-bar,
.pod2-prefilter .node-b .power-bar, /* Pod2 prefilter, NodeB still has Pod1 */
.pod2-filter .node-b .power-bar, /* Pod2 filter, NodeB still has Pod1 */
.pod2-score .node-b .power-bar, /* Pod2 score, NodeB still has Pod1 */
.pod2-assign .node-b .power-bar, /* Pod2 assign, NodeB still has Pod1 */
.final-state .node-b-final .power-bar { width: calc((120 - 40 - 20) / (120 - 40) * 100%); } /* (80-20)/80 = 75% */


/* After Pod2 on NodeA */
.final-state .node-a-updated .power-bar { width: calc((100 - 30 - 30) / (100 - 30) * 100%); } /* (70-30)/70 = ~57.14% */

/* style.css */
/* ... (styles existants) ... */

/* Styles pour les slides d'introduction */
.intro-icons {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 30px; /* Espace entre les icônes */
    margin: 20px 0;
    color: #4CAF50; /* Vert moderne pour les icônes aussi */
}
.intro-icons .fas, .intro-icons .fab { /* Cibler les icônes FontAwesome */
    transition: transform 0.5s ease-in-out;
}
.intro-icons .big-text {
    font-size: 1.8em;
    font-weight: bold;
    color: #e91e63; /* Rose pour les chiffres clés */
}
.intro-icons .big-text small {
    font-size: 0.5em;
    font-weight: normal;
    color: #777;
}

.grow-icon:hover { transform: scale(1.3); }
.energy-icon { animation: pulseEnergy 2s infinite ease-in-out; }
.impact-icon { animation: spinImpact 5s linear infinite; }
.ai-icon { animation: pulseAi 1.5s infinite; }
.pollution-icon { color: #795548; /* Marron pour la pollution */ }
.sun-location { text-align: center; }
.sun-location .fas { margin-bottom: 5px;}
.dimmed { opacity: 0.5; }
.very-dimmed { opacity: 0.2; }
.price-icon { animation: bouncePrice 1.5s infinite; }
.solution-step {
    font-size: 2em;
    font-weight: bold;
    color: #00bcd4; /* Cyan */
    margin-right: -15px; /* Rapprocher du picto */
}
.k8s-logo-like { color: #326ce5; /* Couleur K8s typique */ }
.energy-question { color: #ff9800; /* Orange pour la question */ }

.intro-scheduler {
    font-size: 1em !important; /* Ajuster la taille du texte si besoin */
    padding: 20px !important;
    animation: pulse 1.5s infinite;
}

.roadmap-list {
    list-style: none;
    padding-left: 0;
    text-align: left;
    display: inline-block; /* Pour centrer la liste */
}
.roadmap-list li {
    font-size: 1.1em;
    margin-bottom: 10px;
    padding: 5px 10px;
    border-radius: 5px;
    transition: background-color 0.3s;
}
.roadmap-list li .fas, .roadmap-list li .fab {
    margin-right: 10px;
    color: #4CAF50;
}
.roadmap-list li.highlight-roadmap {
    background-color: #e0f2f1; /* Vert très clair */
    border-left: 4px solid #4CAF50;
    font-weight: bold;
}


@keyframes pulseEnergy {
    0% { transform: scale(1); opacity: 0.7; }
    50% { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(1); opacity: 0.7; }
}
@keyframes spinImpact {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
@keyframes pulseAi {
    0% { transform: scale(1) translateY(0px); }
    50% { transform: scale(1.1) translateY(-5px); }
    100% { transform: scale(1) translateY(0px); }
}
@keyframes bouncePrice {
  0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
  40% {transform: translateY(-15px);}
  60% {transform: translateY(-7px);}
}

/* Assurer que les barres de puissance des démos sont correctes dès le début */
.initial-setup .node-a .power-bar,
.pod1-reserve .node-a .power-bar,
.pod1-prefilter .node-a .power-bar,
.pod2-prefilter .node-a .power-bar, /* Ajout pour Pod2 PreFilter */
.pod2-filter .node-a .power-bar, /* Ajout pour Pod2 Filter */
.pod2-score .node-a .power-bar, /* Ajout pour Pod2 Score */
.pod2-assign .node-a:not(.chosen) .power-bar /* Ajout pour Pod2 Assign (avant choix) */
{
    width: 100%; /* 70W dispo / (100W Pmax - 30W Pac) = 100% de la capacité logique dispo */
}

.initial-setup .node-b .power-bar,
.pod1-prefilter .node-b .power-bar
{
    width: 100%; /* 80W dispo / (120W Pmax - 40W Pac) = 100% de la capacité logique dispo */
}

/* Après Pod1 sur NodeB */
.pod1-reserve .node-b-updated .power-bar,
.pod2-prefilter .node-b .power-bar,
.pod2-filter .node-b .power-bar,
.pod2-score .node-b .power-bar,
.pod2-assign .node-b:not(.chosen) .power-bar, /* Ajout pour Pod2 Assign (avant choix) */
.final-state .node-b-final .power-bar {
    width: calc((120 - 40 - 20) / (120 - 40) * 100%); /* (80-20)/80 = 75% */
}

/* Après Pod2 sur NodeA */
.final-state .node-a-updated .power-bar {
    width: calc((100 - 30 - 30) / (100 - 30) * 100%); /* (70-30)/70 = ~57.14% */
}